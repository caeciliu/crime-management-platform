(()=>{"use strict";var e={3563:(e,t,l)=>{var a=l(3751),r=l(641);const i={id:"app"},s={class:"nav-links"};function n(e,t,l,a,n,o){const u=(0,r.g2)("router-link"),c=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("header",null,[(0,r.Lk)("nav",null,[t[3]||(t[3]=(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("h1",null,"城市犯罪事件管理平台")],-1)),(0,r.Lk)("ul",s,[(0,r.Lk)("li",null,[(0,r.bF)(u,{to:"/"},{default:(0,r.k6)(()=>[...t[0]||(t[0]=[(0,r.eW)("首页",-1)])]),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(u,{to:"/crime-events"},{default:(0,r.k6)(()=>[...t[1]||(t[1]=[(0,r.eW)("犯罪事件",-1)])]),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(u,{to:"/statistics"},{default:(0,r.k6)(()=>[...t[2]||(t[2]=[(0,r.eW)("统计分析",-1)])]),_:1})])])])]),(0,r.Lk)("main",null,[(0,r.bF)(c)]),t[4]||(t[4]=(0,r.Lk)("footer",null,[(0,r.Lk)("p",null,"© 2023 城市犯罪事件管理平台. 所有权利保留.")],-1))])}const o={name:"App"};var u=l(6262);const c=(0,u.A)(o,[["render",n]]),d=c;var p=l(5499);const b={class:"home"},m={class:"features"},h={class:"card-header"},g={class:"card-header"},k={class:"card-header"},v={class:"tech-stack"},f={class:"tech-cards"},F={class:"actions"};function y(e,t,l,a,i,s){const n=(0,r.g2)("Document"),o=(0,r.g2)("el-icon"),u=(0,r.g2)("el-card"),c=(0,r.g2)("Search"),d=(0,r.g2)("DataAnalysis"),p=(0,r.g2)("View"),y=(0,r.g2)("el-button");return(0,r.uX)(),(0,r.CE)("div",b,[t[17]||(t[17]=(0,r.Lk)("div",{class:"welcome"},[(0,r.Lk)("h1",null,"欢迎使用城市犯罪事件管理平台"),(0,r.Lk)("p",null,"这是一个专业的城市犯罪事件管理系统，提供全面的事件管理、分析和统计功能。")],-1)),(0,r.Lk)("div",m,[(0,r.bF)(u,{class:"feature-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",h,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(n)]),_:1}),t[2]||(t[2]=(0,r.Lk)("span",null,"事件管理",-1))])]),default:(0,r.k6)(()=>[t[3]||(t[3]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"犯罪事件录入"),(0,r.Lk)("li",null,"事件状态跟踪"),(0,r.Lk)("li",null,"事件详情查看"),(0,r.Lk)("li",null,"事件更新与删除")],-1))]),_:1}),(0,r.bF)(u,{class:"feature-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",g,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(c)]),_:1}),t[4]||(t[4]=(0,r.Lk)("span",null,"搜索查询",-1))])]),default:(0,r.k6)(()=>[t[5]||(t[5]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"按类型筛选"),(0,r.Lk)("li",null,"按地点搜索"),(0,r.Lk)("li",null,"按时间范围查询"),(0,r.Lk)("li",null,"多条件组合搜索")],-1))]),_:1}),(0,r.bF)(u,{class:"feature-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",k,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(d)]),_:1}),t[6]||(t[6]=(0,r.Lk)("span",null,"统计分析",-1))])]),default:(0,r.k6)(()=>[t[7]||(t[7]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"犯罪类型统计"),(0,r.Lk)("li",null,"事件状态分析"),(0,r.Lk)("li",null,"时间趋势分析"),(0,r.Lk)("li",null,"地点分布统计")],-1))]),_:1})]),(0,r.Lk)("div",v,[t[14]||(t[14]=(0,r.Lk)("h2",null,"技术栈",-1)),(0,r.Lk)("div",f,[(0,r.bF)(u,null,{header:(0,r.k6)(()=>[...t[8]||(t[8]=[(0,r.Lk)("span",null,"前端技术",-1)])]),default:(0,r.k6)(()=>[t[9]||(t[9]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"Vue 3"),(0,r.Lk)("li",null,"Element Plus"),(0,r.Lk)("li",null,"ECharts"),(0,r.Lk)("li",null,"Axios")],-1))]),_:1}),(0,r.bF)(u,null,{header:(0,r.k6)(()=>[...t[10]||(t[10]=[(0,r.Lk)("span",null,"后端技术",-1)])]),default:(0,r.k6)(()=>[t[11]||(t[11]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"Spring Boot 3"),(0,r.Lk)("li",null,"Spring Data JPA"),(0,r.Lk)("li",null,"Spring Cache"),(0,r.Lk)("li",null,"MySQL 8.0")],-1))]),_:1}),(0,r.bF)(u,null,{header:(0,r.k6)(()=>[...t[12]||(t[12]=[(0,r.Lk)("span",null,"容器化",-1)])]),default:(0,r.k6)(()=>[t[13]||(t[13]=(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"Docker"),(0,r.Lk)("li",null,"Docker Compose"),(0,r.Lk)("li",null,"Nginx")],-1))]),_:1})])]),(0,r.Lk)("div",F,[(0,r.bF)(y,{type:"primary",size:"large",onClick:t[0]||(t[0]=t=>e.$router.push("/crime-events"))},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(p)]),_:1}),t[15]||(t[15]=(0,r.eW)(" 查看犯罪事件 ",-1))]),_:1}),(0,r.bF)(y,{type:"success",size:"large",onClick:t[1]||(t[1]=t=>e.$router.push("/statistics"))},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(d)]),_:1}),t[16]||(t[16]=(0,r.eW)(" 查看统计分析 ",-1))]),_:1})])])}var _=l(8548);const L={name:"Home",components:{Document:_.Document,Search:_.Search,DataAnalysis:_.DataAnalysis,View:_.View}},C=(0,u.A)(L,[["render",y],["__scopeId","data-v-3147c1d6"]]),w=C;var E=l(33);const T={class:"crime-events"},V={class:"page-header"},S={class:"pagination"},D={class:"dialog-footer"};function W(e,t,l,a,i,s){const n=(0,r.g2)("Plus"),o=(0,r.g2)("el-icon"),u=(0,r.g2)("el-button"),c=(0,r.g2)("el-option"),d=(0,r.g2)("el-select"),p=(0,r.g2)("el-form-item"),b=(0,r.g2)("el-input"),m=(0,r.g2)("Search"),h=(0,r.g2)("Refresh"),g=(0,r.g2)("el-form"),k=(0,r.g2)("el-card"),v=(0,r.g2)("el-table-column"),f=(0,r.g2)("el-tag"),F=(0,r.g2)("View"),y=(0,r.g2)("Edit"),_=(0,r.g2)("Delete"),L=(0,r.g2)("el-table"),C=(0,r.g2)("el-pagination"),w=(0,r.g2)("el-date-picker"),W=(0,r.g2)("el-dialog"),O=(0,r.g2)("el-descriptions-item"),A=(0,r.g2)("el-descriptions"),x=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",T,[(0,r.Lk)("div",V,[t[17]||(t[17]=(0,r.Lk)("h1",null,"犯罪事件管理",-1)),(0,r.bF)(u,{type:"primary",onClick:s.showAddDialog},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(n)]),_:1}),t[16]||(t[16]=(0,r.eW)(" 添加事件 ",-1))]),_:1},8,["onClick"])]),(0,r.bF)(k,{class:"search-card"},{header:(0,r.k6)(()=>[...t[18]||(t[18]=[(0,r.Lk)("span",null,"搜索条件",-1)])]),default:(0,r.k6)(()=>[(0,r.bF)(g,{model:i.searchForm,inline:""},{default:(0,r.k6)(()=>[(0,r.bF)(p,{label:"犯罪类型"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.searchForm.crimeType,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchForm.crimeType=e),placeholder:"选择犯罪类型",clearable:""},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"盗窃",value:"盗窃"}),(0,r.bF)(c,{label:"抢劫",value:"抢劫"}),(0,r.bF)(c,{label:"诈骗",value:"诈骗"}),(0,r.bF)(c,{label:"暴力",value:"暴力"}),(0,r.bF)(c,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"事件状态"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.searchForm.status,"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchForm.status=e),placeholder:"选择状态",clearable:""},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"待处理",value:"待处理"}),(0,r.bF)(c,{label:"调查中",value:"调查中"}),(0,r.bF)(c,{label:"已结案",value:"已结案"}),(0,r.bF)(c,{label:"处理中",value:"处理中"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"严重程度"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.searchForm.severityLevel,"onUpdate:modelValue":t[2]||(t[2]=e=>i.searchForm.severityLevel=e),placeholder:"选择严重程度",clearable:""},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"轻微",value:"轻微"}),(0,r.bF)(c,{label:"中等",value:"中等"}),(0,r.bF)(c,{label:"严重",value:"严重"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"案发地点"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{modelValue:i.searchForm.location,"onUpdate:modelValue":t[3]||(t[3]=e=>i.searchForm.location=e),placeholder:"输入地点关键词"},null,8,["modelValue"])]),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)(()=>[(0,r.bF)(u,{type:"primary",onClick:s.searchEvents},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(m)]),_:1}),t[19]||(t[19]=(0,r.eW)(" 搜索 ",-1))]),_:1},8,["onClick"]),(0,r.bF)(u,{onClick:s.resetSearch},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(h)]),_:1}),t[20]||(t[20]=(0,r.eW)(" 重置 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),(0,r.bF)(k,null,{default:(0,r.k6)(()=>[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(L,{data:i.events,style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(v,{prop:"id",label:"ID",width:"80"}),(0,r.bF)(v,{prop:"title",label:"案件标题",width:"200"}),(0,r.bF)(v,{prop:"crimeType",label:"犯罪类型",width:"100"},{default:(0,r.k6)(e=>[(0,r.bF)(f,{type:s.getCrimeTypeTagType(e.row.crimeType)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(e.row.crimeType),1)]),_:2},1032,["type"])]),_:1}),(0,r.bF)(v,{prop:"location",label:"案发地点",width:"180"}),(0,r.bF)(v,{prop:"severityLevel",label:"严重程度",width:"100"},{default:(0,r.k6)(e=>[(0,r.bF)(f,{type:s.getSeverityTagType(e.row.severityLevel)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(e.row.severityLevel),1)]),_:2},1032,["type"])]),_:1}),(0,r.bF)(v,{prop:"incidentTime",label:"案发时间",width:"180"},{default:(0,r.k6)(e=>[(0,r.eW)((0,E.v_)(s.formatDateTime(e.row.incidentTime)),1)]),_:1}),(0,r.bF)(v,{prop:"status",label:"状态",width:"100"},{default:(0,r.k6)(e=>[(0,r.bF)(f,{type:s.getStatusTagType(e.row.status)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(e.row.status),1)]),_:2},1032,["type"])]),_:1}),(0,r.bF)(v,{label:"操作",width:"200",fixed:"right"},{default:(0,r.k6)(e=>[(0,r.bF)(u,{size:"small",onClick:t=>s.viewEvent(e.row)},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(F)]),_:1}),t[21]||(t[21]=(0,r.eW)(" 查看 ",-1))]),_:1},8,["onClick"]),(0,r.bF)(u,{size:"small",onClick:t=>s.editEvent(e.row)},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(y)]),_:1}),t[22]||(t[22]=(0,r.eW)(" 编辑 ",-1))]),_:1},8,["onClick"]),(0,r.bF)(u,{size:"small",type:"danger",onClick:t=>s.confirmDelete(e.row)},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(_)]),_:1}),t[23]||(t[23]=(0,r.eW)(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,i.loading]]),(0,r.Lk)("div",S,[(0,r.bF)(C,{"current-page":i.currentPage,"onUpdate:currentPage":t[4]||(t[4]=e=>i.currentPage=e),"page-size":i.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>i.pageSize=e),"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,r.bF)(W,{modelValue:i.dialogVisible,"onUpdate:modelValue":t[14]||(t[14]=e=>i.dialogVisible=e),title:i.isEdit?"编辑犯罪事件":"添加犯罪事件",width:"50%","close-on-click-modal":!1},{footer:(0,r.k6)(()=>[(0,r.Lk)("span",D,[(0,r.bF)(u,{onClick:t[13]||(t[13]=e=>i.dialogVisible=!1)},{default:(0,r.k6)(()=>[...t[24]||(t[24]=[(0,r.eW)("取消",-1)])]),_:1}),(0,r.bF)(u,{type:"primary",onClick:s.saveEvent},{default:(0,r.k6)(()=>[...t[25]||(t[25]=[(0,r.eW)("确定",-1)])]),_:1},8,["onClick"])])]),default:(0,r.k6)(()=>[(0,r.bF)(g,{model:i.form,rules:i.rules,ref:"formRef","label-width":"100px"},{default:(0,r.k6)(()=>[(0,r.bF)(p,{label:"案件标题",prop:"title"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{modelValue:i.form.title,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.title=e)},null,8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"犯罪类型",prop:"crimeType"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.form.crimeType,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.crimeType=e),placeholder:"选择犯罪类型",style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"盗窃",value:"盗窃"}),(0,r.bF)(c,{label:"抢劫",value:"抢劫"}),(0,r.bF)(c,{label:"诈骗",value:"诈骗"}),(0,r.bF)(c,{label:"暴力",value:"暴力"}),(0,r.bF)(c,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"案发地点",prop:"location"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{modelValue:i.form.location,"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.location=e)},null,8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"案发时间",prop:"incidentTime"},{default:(0,r.k6)(()=>[(0,r.bF)(w,{modelValue:i.form.incidentTime,"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.incidentTime=e),type:"datetime",placeholder:"选择案发时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"严重程度",prop:"severityLevel"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.form.severityLevel,"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.severityLevel=e),placeholder:"选择严重程度",style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"轻微",value:"轻微"}),(0,r.bF)(c,{label:"中等",value:"中等"}),(0,r.bF)(c,{label:"严重",value:"严重"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"事件状态",prop:"status"},{default:(0,r.k6)(()=>[(0,r.bF)(d,{modelValue:i.form.status,"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.status=e),placeholder:"选择状态",style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(c,{label:"待处理",value:"待处理"}),(0,r.bF)(c,{label:"调查中",value:"调查中"}),(0,r.bF)(c,{label:"处理中",value:"处理中"}),(0,r.bF)(c,{label:"已结案",value:"已结案"})]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(p,{label:"事件描述",prop:"description"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{modelValue:i.form.description,"onUpdate:modelValue":t[12]||(t[12]=e=>i.form.description=e),type:"textarea",rows:4,placeholder:"请输入事件详细描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(0,r.bF)(W,{modelValue:i.viewDialogVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>i.viewDialogVisible=e),title:"事件详情",width:"50%"},{default:(0,r.k6)(()=>[(0,r.bF)(A,{column:2,border:""},{default:(0,r.k6)(()=>[(0,r.bF)(O,{label:"案件ID"},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.id),1)]),_:1}),(0,r.bF)(O,{label:"案件标题"},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.title),1)]),_:1}),(0,r.bF)(O,{label:"犯罪类型"},{default:(0,r.k6)(()=>[(0,r.bF)(f,{type:s.getCrimeTypeTagType(i.currentEvent.crimeType)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.crimeType),1)]),_:1},8,["type"])]),_:1}),(0,r.bF)(O,{label:"严重程度"},{default:(0,r.k6)(()=>[(0,r.bF)(f,{type:s.getSeverityTagType(i.currentEvent.severityLevel)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.severityLevel),1)]),_:1},8,["type"])]),_:1}),(0,r.bF)(O,{label:"案发地点"},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.location),1)]),_:1}),(0,r.bF)(O,{label:"当前状态"},{default:(0,r.k6)(()=>[(0,r.bF)(f,{type:s.getStatusTagType(i.currentEvent.status)},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.status),1)]),_:1},8,["type"])]),_:1}),(0,r.bF)(O,{label:"案发时间"},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(s.formatDateTime(i.currentEvent.incidentTime)),1)]),_:1}),(0,r.bF)(O,{label:"上报时间"},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(s.formatDateTime(i.currentEvent.reportTime)),1)]),_:1}),(0,r.bF)(O,{label:"事件描述",span:2},{default:(0,r.k6)(()=>[(0,r.eW)((0,E.v_)(i.currentEvent.description||"无描述"),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var O=l(163),A=l(7918),x=l(4335);const z=x.A.create({baseURL:"/api",timeout:1e4});z.interceptors.request.use(e=>e,e=>Promise.reject(e)),z.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));const P=z,U={getAllCrimeEvents(){return P.get("/crime-events")},getCrimeEventsPage(e=0,t=10){return P.get(`/crime-events/page?page=${e}&size=${t}`)},getCrimeEventById(e){return P.get(`/crime-events/${e}`)},createCrimeEvent(e){return P.post("/crime-events",e)},updateCrimeEvent(e,t){return P.put(`/crime-events/${e}`,t)},updateCrimeEventStatus(e,t){return P.put(`/crime-events/${e}/status`,{status:t})},deleteCrimeEvent(e){return P.delete(`/crime-events/${e}`)},searchCrimeEvents(e){return P.get("/crime-events/search",{params:e})},searchByTimeRange(e,t){return P.get("/crime-events/search/time-range",{params:{startTime:e,endTime:t}})},getCrimeStatistics(){return P.get("/crime-events/statistics")},healthCheck(){return P.get("/crime-events/health")}},$={name:"CrimeEvents",components:{Plus:_.Plus,Search:_.Search,Refresh:_.Refresh,View:_.View,Edit:_.Edit,Delete:_.Delete},data(){return{events:[],loading:!1,currentPage:1,pageSize:10,total:0,dialogVisible:!1,viewDialogVisible:!1,isEdit:!1,currentEvent:{},searchForm:{crimeType:"",status:"",severityLevel:"",location:""},form:{id:null,title:"",crimeType:"",location:"",description:"",incidentTime:"",status:"待处理",severityLevel:""},rules:{title:[{required:!0,message:"请输入案件标题",trigger:"blur"},{min:5,max:200,message:"标题长度在 5 到 200 个字符",trigger:"blur"}],crimeType:[{required:!0,message:"请选择犯罪类型",trigger:"change"}],location:[{required:!0,message:"请输入案发地点",trigger:"blur"}],incidentTime:[{required:!0,message:"请选择案发时间",trigger:"change"}],severityLevel:[{required:!0,message:"请选择严重程度",trigger:"change"}],status:[{required:!0,message:"请选择事件状态",trigger:"change"}]}}},created(){this.fetchEvents()},methods:{async fetchEvents(){this.loading=!0;try{const e=await U.getCrimeEventsPage(this.currentPage-1,this.pageSize);this.events=e.data.content,this.total=e.data.totalElements}catch(e){O.nk.error("获取犯罪事件列表失败"),console.error("Error fetching crime events:",e)}finally{this.loading=!1}},async searchEvents(){this.loading=!0;try{const e=await U.searchCrimeEvents(this.searchForm);this.events=e.data,this.total=e.data.length}catch(e){O.nk.error("搜索失败"),console.error("Error searching events:",e)}finally{this.loading=!1}},resetSearch(){this.searchForm={crimeType:"",status:"",severityLevel:"",location:""},this.fetchEvents()},showAddDialog(){this.isEdit=!1,this.form={id:null,title:"",crimeType:"",location:"",description:"",incidentTime:"",status:"待处理",severityLevel:""},this.dialogVisible=!0},viewEvent(e){this.currentEvent={...e},this.viewDialogVisible=!0},editEvent(e){this.isEdit=!0,this.form={...e,incidentTime:this.formatDateTimeForInput(e.incidentTime)},this.dialogVisible=!0},async saveEvent(){try{await this.$refs.formRef.validate(),this.isEdit?(await U.updateCrimeEvent(this.form.id,this.form),O.nk.success("犯罪事件更新成功")):(await U.createCrimeEvent(this.form),O.nk.success("犯罪事件创建成功")),this.dialogVisible=!1,this.fetchEvents()}catch(e){e.response&&e.response.data?O.nk.error(e.response.data.message||"操作失败"):O.nk.error("操作失败"),console.error("Error saving event:",e)}},confirmDelete(e){A.s.confirm(`确定要删除案件 "${e.title}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await U.deleteCrimeEvent(e.id),O.nk.success("删除成功"),this.fetchEvents()}catch(t){O.nk.error("删除失败"),console.error("Error deleting event:",t)}}).catch(()=>{})},handleSizeChange(e){this.pageSize=e,this.fetchEvents()},handleCurrentChange(e){this.currentPage=e,this.fetchEvents()},getCrimeTypeTagType(e){const t={盗窃:"warning",抢劫:"danger",诈骗:"info",暴力:"danger",其他:""};return t[e]||""},getSeverityTagType(e){const t={轻微:"success",中等:"warning",严重:"danger"};return t[e]||""},getStatusTagType(e){const t={待处理:"info",调查中:"warning",处理中:"warning",已结案:"success"};return t[e]||""},formatDateTime(e){if(!e)return"";const t=new Date(e);return t.toLocaleString("zh-CN")},formatDateTimeForInput(e){if(!e)return"";const t=new Date(e);return t.toISOString().slice(0,19).replace("T"," ")}}},j=(0,u.A)($,[["render",W],["__scopeId","data-v-4e1a2575"]]),I=j,R={class:"statistics"},Y={class:"page-header"},q={class:"stats-cards"},B={class:"card-header"},M={class:"stat-number"},X={class:"card-header"},H={class:"stat-number pending"},N={class:"card-header"},J={class:"stat-number investigating"},Q={class:"card-header"},G={class:"stat-number solved"},K={class:"charts"},Z={class:"data-table"};function ee(e,t,l,a,i,s){const n=(0,r.g2)("Refresh"),o=(0,r.g2)("el-icon"),u=(0,r.g2)("el-button"),c=(0,r.g2)("DataAnalysis"),d=(0,r.g2)("el-card"),p=(0,r.g2)("Clock"),b=(0,r.g2)("Search"),m=(0,r.g2)("Select"),h=(0,r.g2)("v-chart"),g=(0,r.g2)("el-col"),k=(0,r.g2)("el-row"),v=(0,r.g2)("el-table-column"),f=(0,r.g2)("el-table");return(0,r.uX)(),(0,r.CE)("div",R,[(0,r.Lk)("div",Y,[t[1]||(t[1]=(0,r.Lk)("h1",null,"统计分析",-1)),(0,r.bF)(u,{type:"primary",onClick:s.refreshStatistics},{default:(0,r.k6)(()=>[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(n)]),_:1}),t[0]||(t[0]=(0,r.eW)(" 刷新数据 ",-1))]),_:1},8,["onClick"])]),(0,r.Lk)("div",q,[(0,r.bF)(d,{class:"stat-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",B,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(c)]),_:1}),t[2]||(t[2]=(0,r.Lk)("span",null,"总案件数",-1))])]),default:(0,r.k6)(()=>[(0,r.Lk)("div",M,(0,E.v_)(i.totalCases),1)]),_:1}),(0,r.bF)(d,{class:"stat-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",X,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(p)]),_:1}),t[3]||(t[3]=(0,r.Lk)("span",null,"待处理",-1))])]),default:(0,r.k6)(()=>[(0,r.Lk)("div",H,(0,E.v_)(i.pendingCases),1)]),_:1}),(0,r.bF)(d,{class:"stat-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",N,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(b)]),_:1}),t[4]||(t[4]=(0,r.Lk)("span",null,"调查中",-1))])]),default:(0,r.k6)(()=>[(0,r.Lk)("div",J,(0,E.v_)(i.investigatingCases),1)]),_:1}),(0,r.bF)(d,{class:"stat-card"},{header:(0,r.k6)(()=>[(0,r.Lk)("div",Q,[(0,r.bF)(o,null,{default:(0,r.k6)(()=>[(0,r.bF)(m)]),_:1}),t[5]||(t[5]=(0,r.Lk)("span",null,"已结案",-1))])]),default:(0,r.k6)(()=>[(0,r.Lk)("div",G,(0,E.v_)(i.solvedCases),1)]),_:1})]),(0,r.Lk)("div",K,[(0,r.bF)(k,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(g,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(d,null,{header:(0,r.k6)(()=>[...t[6]||(t[6]=[(0,r.Lk)("span",null,"犯罪类型分布",-1)])]),default:(0,r.k6)(()=>[(0,r.bF)(h,{class:"chart",option:i.crimeTypeChartOption},null,8,["option"])]),_:1})]),_:1}),(0,r.bF)(g,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(d,null,{header:(0,r.k6)(()=>[...t[7]||(t[7]=[(0,r.Lk)("span",null,"案件状态分布",-1)])]),default:(0,r.k6)(()=>[(0,r.bF)(h,{class:"chart",option:i.statusChartOption},null,8,["option"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(k,{gutter:20,style:{"margin-top":"20px"}},{default:(0,r.k6)(()=>[(0,r.bF)(g,{span:24},{default:(0,r.k6)(()=>[(0,r.bF)(d,null,{header:(0,r.k6)(()=>[...t[8]||(t[8]=[(0,r.Lk)("span",null,"严重程度分布",-1)])]),default:(0,r.k6)(()=>[(0,r.bF)(h,{class:"chart",option:i.severityChartOption},null,8,["option"])]),_:1})]),_:1})]),_:1})]),(0,r.Lk)("div",Z,[(0,r.bF)(d,null,{header:(0,r.k6)(()=>[...t[9]||(t[9]=[(0,r.Lk)("span",null,"详细统计数据",-1)])]),default:(0,r.k6)(()=>[(0,r.bF)(f,{data:i.statisticsData,style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(v,{prop:"category",label:"分类"}),(0,r.bF)(v,{prop:"count",label:"数量"}),(0,r.bF)(v,{prop:"percentage",label:"占比"},{default:(0,r.k6)(e=>[(0,r.eW)((0,E.v_)(e.row.percentage)+"% ",1)]),_:1})]),_:1},8,["data"])]),_:1})])])}var te=l(3087),le=l(6411),ae=l(6261),re=l(2094),ie=l(4064),se=l(3416),ne=l(5116),oe=l(260),ue=l(3508);(0,te.Y)([le.a,ae.a,re.a,ie.a,se.a,ne.a,oe.a]);const ce={name:"Statistics",components:{VChart:ue.Ay,Refresh:_.Refresh,DataAnalysis:_.DataAnalysis,Clock:_.Clock,Search:_.Search,Select:_.Select},data(){return{statistics:{},loading:!1,totalCases:0,pendingCases:0,investigatingCases:0,solvedCases:0,crimeTypeChartOption:{},statusChartOption:{},severityChartOption:{},statisticsData:[]}},created(){this.fetchStatistics()},methods:{async fetchStatistics(){this.loading=!0;try{const e=await U.getCrimeStatistics();this.statistics=e.data,this.processStatistics()}catch(e){O.nk.error("获取统计数据失败"),console.error("Error fetching statistics:",e)}finally{this.loading=!1}},processStatistics(){const e=[],t=[],l=[],a=[];let r=0;const i=["盗窃","抢劫","诈骗","暴力","其他"];i.forEach(t=>{const l=this.statistics[t]||0;r+=l,e.push({name:t,value:l}),a.push({category:`犯罪类型-${t}`,count:l,percentage:0})});const s=["待处理","调查中","处理中","已结案"];s.forEach(e=>{const l=this.statistics[e]||0;t.push({name:e,value:l}),a.push({category:`案件状态-${e}`,count:l,percentage:0}),"待处理"===e&&(this.pendingCases=l),"调查中"===e&&(this.investigatingCases=l),"已结案"===e&&(this.solvedCases=l)});const n=["轻微","中等","严重"];n.forEach(e=>{const t=this.statistics[e]||0;l.push({name:e,value:t}),a.push({category:`严重程度-${e}`,count:t,percentage:0})}),this.totalCases=r,a.forEach(e=>{e.percentage=r>0?(e.count/r*100).toFixed(1):0}),this.statisticsData=a,this.crimeTypeChartOption={title:{text:"犯罪类型分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"犯罪类型",type:"pie",radius:"50%",data:e,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},this.statusChartOption={title:{text:"案件状态分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"案件状态",type:"pie",radius:"50%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},this.severityChartOption={title:{text:"严重程度分布",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:n},yAxis:{type:"value"},series:[{name:"案件数量",type:"bar",data:l.map(e=>e.value),itemStyle:{color:function(e){const t={轻微:"#67C23A",中等:"#E6A23C",严重:"#F56C6C"};return t[e.name]||"#409EFF"}}}]}},refreshStatistics(){this.fetchStatistics(),O.nk.success("统计数据已刷新")}}},de=(0,u.A)(ce,[["render",ee],["__scopeId","data-v-16285c22"]]),pe=de,be=[{path:"/",name:"Home",component:w},{path:"/crime-events",name:"CrimeEvents",component:I},{path:"/statistics",name:"Statistics",component:pe}],me=(0,p.aE)({history:(0,p.LA)(),routes:be}),he=me;var ge=l(831);l(4188);const ke=(0,a.Ef)(d);for(const[ve,fe]of Object.entries(_))ke.component(ve,fe);ke.use(he),ke.use(ge.A),ke.mount("#app")}},t={};function l(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,l),i.exports}l.m=e,(()=>{var e=[];l.O=(t,a,r,i)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){for(var[a,r,i]=e[c],n=!0,o=0;o<a.length;o++)(!1&i||s>=i)&&Object.keys(l.O).every(e=>l.O[e](a[o]))?a.splice(o--,1):(n=!1,i<s&&(s=i));if(n){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}})(),(()=>{l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[s,n,o]=a,u=0;if(s.some(t=>0!==e[t])){for(r in n)l.o(n,r)&&(l.m[r]=n[r]);if(o)var c=o(l)}for(t&&t(a);u<s.length;u++)i=s[u],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(c)},a=self["webpackChunkcrime_management_frontend"]=self["webpackChunkcrime_management_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=l.O(void 0,[504],()=>l(3563));a=l.O(a)})();
//# sourceMappingURL=app.59b2d9f8.js.map